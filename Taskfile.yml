version: '3'

tasks:
  test:
    desc: Run tests
    cmds:
      - go test ./...

  lint:
    desc: Run lint
    cmds:
      - golangci-lint run

  godocs:
    desc: Sync the latest tag with GoDocs
    cmds:
      - echo "syndicating to GoDocs..."
      - test $(GIT_DOMAIN)
      - test $(REPO_OWNER)
      - test $(REPO_NAME)
      - test $(VERSION_SHORT)
      - curl https://proxy.golang.org/$(GIT_DOMAIN)/$(REPO_OWNER)/$(REPO_NAME)/@v/$(VERSION_SHORT).info

  setup:
    desc: Setup go environment
    cmds:
      - actions/checkout@v3
      - actions/setup-go@v4:
          go-version: 1.21
